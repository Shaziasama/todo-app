<!--
================================================================================
SYNC IMPACT REPORT
================================================================================
Version Change: N/A → 1.0.0 (Initial ratification)

Modified Principles: None (initial creation)

Added Sections:
  - Core Principles (10 principles: SDD, Single Source of Truth, Progressive
    Evolution, Clean & Hexagonal Architecture, Statelessness & Scalability,
    Security by Default, MCP as AI Standard, Dapr Infrastructure Abstraction,
    Portability & Zero Vendor Lock-in, Observability & Reproducibility)
  - Technology Constraints (Mandatory Stack) with full technology table
  - Quality Standards
  - Governance with Amendment Process

Removed Sections: None (initial creation)

Templates Requiring Updates:
  - .specify/templates/plan-template.md: ✅ Reviewed - Constitution Check section
    references "Gates determined based on constitution file" - compatible
  - .specify/templates/spec-template.md: ✅ Reviewed - No constitution references,
    requirements-focused - compatible
  - .specify/templates/tasks-template.md: ✅ Reviewed - User story organization
    aligns with SDD principles - compatible

Follow-up TODOs: None

================================================================================
-->

# Evolution of Todo – From CLI to Distributed Cloud-Native AI System Constitution

## Core Principles

### I. Strict Spec-Driven Development (SDD)

No manual coding is ever permitted. All implementation MUST be generated by Claude Code via Spec-Kit Plus skills (sp.specify → sp.plan → sp.tasks → sp.implement). Code may only be written for tasks explicitly listed in an approved `tasks.md`.

**Rationale**: Ensures traceability, consistency, and that all code is tied to approved specifications. Prevents scope creep and undocumented features.

### II. Single Source of Truth

Specifications in `/specs/` are the sole authority for what the system MUST do. If a requirement or behavior is not documented in the specs, it does not exist.

**Rationale**: Eliminates ambiguity and conflicting sources of requirements. All stakeholders reference the same authoritative documents.

### III. Progressive Evolution

Each phase builds directly on the previous one. Backward compatibility and migration paths MUST be considered where applicable.

Phase progression: **I → II → III → IV → V** represents increasing complexity:
- **Phase I**: CLI
- **Phase II**: Full-Stack (Next.js + FastAPI)
- **Phase III**: Agentic AI (MCP + Agents SDK)
- **Phase IV**: Local K8s (Minikube + Helm)
- **Phase V**: Cloud Event-Driven (DOKS + Dapr + Kafka)

**Rationale**: Enables incremental learning and risk reduction while building toward production-grade distributed systems.

### IV. Clean & Hexagonal Architecture

Domain logic MUST be independent of frameworks, UI, and infrastructure. Ports & Adapters pattern preferred. Dependencies point inward toward the domain core.

**Rationale**: Ensures testability, maintainability, and the ability to swap infrastructure components without affecting business logic.

### V. Statelessness & Scalability First

All services and components MUST be horizontally scalable. Authentication MUST be stateless (JWT). Server components (backend, agents, MCP endpoints) MUST hold no session state—all state lives in database or Dapr state store.

**Rationale**: Enables cloud-native deployment patterns, automatic scaling, and resilience through redundancy.

### VI. Security by Default

User isolation is mandatory: every operation MUST be scoped to the authenticated `user_id`. JWT verification required on all protected endpoints. Secrets MUST never be hardcoded—use environment variables or Kubernetes/Dapr secrets.

**Rationale**: Prevents data leakage between users and ensures security is built-in rather than bolted-on.

### VII. MCP as the AI Interaction Standard (Phase III–V)

All AI-driven actions on the system MUST go through officially defined MCP tools. No direct database or endpoint access from agents is permitted.

**Rationale**: Provides a standardized, auditable, and controllable interface for AI agent interactions with the system.

### VIII. Infrastructure Abstraction with Dapr (Phase V)

Application code MUST depend only on Dapr building blocks (pub/sub, state, bindings, service invocation, secrets). No direct Kafka, PostgreSQL, or other infrastructure clients in business logic.

**Rationale**: Enables infrastructure portability and prevents vendor lock-in while simplifying application code.

### IX. Portability & Zero Vendor Lock-in

Infrastructure choices (broker, database, cloud) MUST be swappable via configuration (Dapr components, Helm values). Prefer open standards and community-driven tools.

**Rationale**: Reduces migration costs and ensures the system can adapt to changing infrastructure needs.

### X. Observability & Reproducibility

All infrastructure MUST be declarative (Dockerfiles, Helm charts, Dapr components, Kubernetes manifests). Logging, tracing, and health checks MUST be considered from Phase IV onward.

**Rationale**: Ensures reproducible deployments and operational visibility for debugging and monitoring.

## Technology Constraints (Mandatory Stack)

| Layer | Technology | Rationale |
|-------|------------|-----------|
| Language | Python 3.13+ (backend), TypeScript (frontend) | Modern, strong ecosystem |
| Package Manager | UV (Python) | Fast, modern replacement for pip/poetry |
| Frontend | Next.js 16+ (App Router) | Server components, performance, SEO |
| Styling | Tailwind CSS | Utility-first, consistent design |
| Backend | FastAPI | Async, automatic docs, type safety |
| ORM | SQLModel | SQLAlchemy + Pydantic simplicity |
| Database | Neon Serverless PostgreSQL | Scalable, branchable, free tier |
| Authentication | Better Auth + JWT | Stateless, cross-service compatible |
| AI Chat UI | OpenAI ChatKit | Official, embeddable, domain-allowlisted |
| Agent Framework | OpenAI Agents SDK | Production-grade agent orchestration |
| Tool Standard | Official MCP SDK | Standardized tool calling for agents |
| Containerization | Docker | Industry standard |
| Local Orchestration | Minikube + Helm | Zero-cost Kubernetes learning |
| Cloud Orchestration | DigitalOcean DOKS (or AKS/GKE/OKE) | Production-grade K8s |
| Eventing | Kafka-compatible (Redpanda preferred) | Streaming backbone |
| Runtime | Dapr (full building blocks) | Resilience, portability, sidecar pattern |
| Development | Claude Code + Spec-Kit Plus | Agentic, spec-driven execution |

No additional frameworks or major libraries may be introduced without formal constitution amendment.

## Quality Standards

- All code MUST be type-annotated (Python type hints, TypeScript).
- Error handling MUST be explicit and user-friendly.
- Responses MUST include confirmation of actions (especially in chatbot phase).
- Tests are encouraged but not mandatory for hackathon scope.

## Governance

### Amendment Process

Any change to this constitution requires:

1. A clear justification linked to project goals.
2. Update via `sp.constitution` skill.
3. Review and explicit acceptance before proceeding.

### Versioning Policy

Constitution versions follow semantic versioning:
- **MAJOR**: Backward-incompatible governance/principle removals or redefinitions.
- **MINOR**: New principle/section added or materially expanded guidance.
- **PATCH**: Clarifications, wording, typo fixes, non-semantic refinements.

### Compliance Review

All PRs/reviews MUST verify compliance with these principles. Complexity MUST be justified against the Clean Architecture and Simplicity principles. Use project guidance files for runtime development guidance.

This constitution remains in force for the entire project lifecycle.

**Version**: 1.0.0 | **Ratified**: 2025-12-29 | **Last Amended**: 2025-12-29
